{% extends 'main/base.html' %}
{% load static %}
{% load my_tags %}

{% block references %}
<link type="text/css" href="{% static 'css/otherProfile.css' %}" rel="stylesheet" />
{% endblock %}

{% block content %}
<div id="main" class="container" >
	<div class="row" style="height:100%">
		<div id="userProfile" class="col-12">
			<div class="box">
				<div id="userHeader" class="d-flex justify-content-center">
					<a id="userPicture">
					<img src="{{ userProfile.avatar.url }}">
					</a>
					<div id="userName" class="resize">{{ userProfile.first_name }} {{ userProfile.last_name }}</div>
				</div>
				{% if user.is_authenticated and userProfile != user %}
					{% if is_friend %}
						<div class="d-flex justify-content-center">
							You're friends!
						</div>
					{% elif sent_request %} 
						<hr>
						<div class="d-flex justify-content-center">
							You sent {{ userProfile.first_name }} a friend request.
						</div>
					{% elif received_request %} 
						<hr>
						<div class="d-flex flex-column align-items-center">
							 {{ userProfile.first_name }} wants to be friends! 
							 <br />
							<form method="post" action="{% url 'respond-request' userProfile.pk %}">
								{% csrf_token %}
								<button class="btn btn-primary" name="accept" type="submit">Accept</button>
								<button class="btn btn-danger" name="decline" type="submit">Decline</button>
							</form>

						</div>
					{% else %} 
						<hr>
						<div class="d-flex justify-content-center">
							<form method="post" action="{% url 'send-request' userProfile.pk %}">
								{% csrf_token %}
								<button class="btn btn-primary" type="submit">Send friend request</button>
							</form>
						</div>
					{% endif %}
				{% endif %}
				<hr>
				<span id="userBio"> Bio: Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod
				tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
				quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
				consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
				cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
				proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
				<hr>
				<span id="userSchool">School: 
				<hr>
				{% if userProfileFriends.count > 0 %}
					Friends ({{ userProfileFriends.count }} total)
					<div class="d-flex flex-wrap justify-content-center">
					{% for friend in userProfileFriends|slice:"6" %}
						<a href="{% url 'user-profile' friend.pk %}">
							<div class="d-flex flex-column align-items-center">
								<img src="{{ friend.avatar.url }}" style="width:120px; margin:5px;">
								{{ friend.first_name }} {{friend.last_name }}
							</div>
						</a>
					{% endfor %}
					</div>
					{% if userProfileFriends.count > 6 %}
					<div class="d-flex justify-content-center">
						<a href="#friends-modal" data-toggle="modal">view all</a>
					</div>
					{% endif %}
				{% else %}
				{{ userProfile.first_name }} doesn't have any friends yet.
				{% endif %}
			</div>
		</div>
	</div>
</div>
<!-- Friends Modal -->
<div class="modal fade" id="friends-modal" tabindex="-1" role="dialog" aria-labelledby="friendsModal" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 >{{ user.first_name}}'s friends</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<div class="d-flex flex-wrap justify-content-center">
					{% for friend in userProfileFriends %}
						<a href="{% url 'user-profile' friend.pk %}">
							<div class="d-flex flex-column align-items-center">
								<img src="{{ friend.avatar.url }}" style="width:120px; margin:5px;">
								{{ friend.first_name }} {{friend.last_name }}
							</div>
						</a>
					{% endfor %}
				</div>
			</div>
		</div>
	</div>
</div>
<!-- Settings Modal -->
<div class="modal fade" id="settings_overlay" tabindex="-1" role="dialog" aria-labelledby="settingsModal" aria-hidden="true">
	<div class="modal-dialog modal-dialog-centered" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 >Settings</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<form>
					<div class="form-group">
						<label for="exampleInputEmail1">Email address</label>
						<input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Enter email">
						<small id="emailHelp" class="form-text text-muted">We'll never share your email with anyone else.</small>
					</div>
					<div class="form-group">
						<label for="exampleInputPassword1">Password</label>
						<input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
					</div>
					<div class="form-check">
						<input type="checkbox" class="form-check-input" id="exampleCheck1">
						<label class="form-check-label" for="exampleCheck1">Check me out</label>
					</div>
					<button type="submit" class="btn btn-primary">Submit</button>
				</form>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary" onclick="saveSettings()" data-dismiss="modal">Save changes</button>
			</div>
		</div>
	</div>
</div>
{% endblock %}
